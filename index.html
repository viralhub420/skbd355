<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SKBD Premium Rewards</title>
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-firestore-compat.js"></script>
    <style>
        body { background:#0f0f0f; color:#ffffff; text-align:center; font-family: 'Segoe UI', sans-serif; padding:15px; margin: 0; }
        .balance-card { background: linear-gradient(135deg, #0088cc, #005f91); padding: 25px; border-radius: 20px; margin-bottom: 20px; box-shadow: 0 10px 20px rgba(0,0,0,0.3); }
        .balance-card h1 { font-size: 42px; margin: 10px 0; }
        .refer-section { background: #1e1e1e; padding: 15px; border-radius: 15px; margin-bottom: 20px; border: 1px dashed #0088cc; }
        .btn-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 12px; }
        button { padding: 16px; border: none; border-radius: 15px; font-weight: bold; cursor: pointer; font-size: 14px; color: white; transition: 0.2s; }
        button:active { transform: scale(0.95); }
        .btn-main { background: #27ae60; grid-column: span 2; }
        .btn-game { background: #2980b9; }
        .btn-offer { background: #8e44ad; }
        .btn-rules { background: #e74c3c; grid-column: span 2; margin-top: 10px; }
        .btn-ref { background: #f39c12; grid-column: span 2; }
        .btn-official { background: #16a085; grid-column: span 2; }
        #adminBtn { background: #d35400; margin-top: 20px; width: 100%; display: none; }
        .btn-ad { background: #f1c40f; color: #000; }
    </style>
</head>
<body>
    <div class="header"><h3>Welcome, <span id="userName">User</span>!</h3></div>
    <div class="balance-card">
        <p>Current Balance</p>
        <h1 id="userBalance">0</h1>
    </div>

    <div class="refer-section">
        <p style="margin:0 0 10px 0; font-size:14px; color: #f1c40f;">ЁЯОБ ржкрзНрж░рждрж┐ рж░рзЗржлрж╛рж░рзЗ ржкрж╛ржи рззрзжрзж ржкржпрж╝рзЗржирзНржЯ!</p>
        <button class="btn-ref" onclick="shareReferral()">ЁЯФЧ Invite Friends & Earn </button>
    </div>

    <div class="btn-grid">
        <button class="btn-main" onclick="awardCoins(20, 85, 'https://otieu.com/4/10540712', 'Daily Bonus')">ЁЯОБ Daily Bonus (+20)</button>
        <button class="btn-game" onclick="awardCoins(20, 85, 'https://otieu.com/4/10235751', 'Game Bonus')">ЁЯОо Play Game (+20)</button>
        <button class="btn-offer" onclick="awardCoins(20, 85, 'https://otieu.com/4/10453524', 'Mega Offer')">ЁЯз▓ Mega Offer (+20)</button>
        <button class="btn-ad" onclick="awardCoins(15, 60, 'https://otieu.com/4/10540712', 'Watch Ad')">ЁЯУ║ Watch Ad (+15)</button>
        <button class="btn-ad" style="background: #f1c40f; color: #000;" onclick="openReview()">тнР Review (+10)</button>
        <button class="btn-rules" onclick="showRules()">ЁЯУЬ Rules & Information</button>
        <button class="btn-official" onclick="tg.openLink('https://t.me/skbd355_official')">ЁЯУв Official Channel</button>
    </div>
    
    <button id="adminBtn" onclick="toggleAdmin()">ЁЯЫа Admin Dashboard</button>
    
<script>
firebase.initializeApp({ 
    apiKey: "AIzaSyD8ZSiPZ9HDJV1qGznPOBAu2qYN9lmSqWU", 
    authDomain: "skbd355-reward-app.firebaseapp.com", 
    projectId: "skbd355-reward-app" 
});

const db = firebase.firestore();
const tg = window.Telegram.WebApp;
const user = tg.initDataUnsafe?.user;
let userRef;

if (user) {
    document.getElementById("userName").innerText = user.first_name;
    userRef = db.collection("users").doc(String(user.id));
    if (user.id === 6311806060) document.getElementById("adminBtn").style.display = "block";

    userRef.onSnapshot(doc => {
        if (doc.exists) document.getElementById("userBalance").innerText = doc.data().balance;
    });
}

function showRules() {
    alert("ЁЯУЬ ржЖржорж╛ржжрзЗрж░ ржирж┐рзЯржорж╛ржмрж▓рзА:\n\nрзз. ржмрж┐ржЬрзНржЮрж╛ржкржирзЗ ржХрзНрж▓рж┐ржХ ржХрж░рж╛рж░ ржкрж░ ржЕржмрж╢рзНржпржЗ ржЕрзНржпрж╛ржб ржжрзЗржЦрж╛ рж╕ржорзНржкрзВрж░рзНржг ржХрж░рждрзЗ рж╣ржмрзЗред\nрзи. ржнрзБрж▓ ржХрзНрж▓рж┐ржХ ржХрж░рж▓рзЗ ржХрзЯрзЗржи ржпрзЛржЧ рж╣ржмрзЗ ржирж╛ред\nрзй. рзлрзжрзжрзж ржкржпрж╝рзЗржирзНржЯ рж╣рж▓рзЗ ржкрзЯрзЗржирзНржЯ ржнрж╛ржЩрж┐рзЯрзЗ ржмрж┐ржХрж╛рж╢, ржиржЧржж ржмрж╛ рж░ржХрзЗржЯрзЗ ржкрзЗржорзЗржирзНржЯ ржирж┐рждрзЗ ржкрж╛рж░ржмрзЗржиред\nрзк. ржкрзЗржорзЗржирзНржЯ рзирзк ржШржирзНржЯрж╛рж░ ржоржзрзНржпрзЗ ржХрж░рж╛ рж╣рзЯред\nрзл. ржмрзЗрж╢рж┐ ржЗржиржХрж╛ржорзЗрж░ ржЬржирзНржп USA ржмрж╛ UK VPN ржмрзНржпржмрж╣рж╛рж░ ржХрж░рзБржиред\n\nтЪая╕П ржмрж┐рж╢рзЗрж╖ ржжрзНрж░рж╖рзНржЯржмрзНржп: ржкрзЯрзЗржирзНржЯ ржорж╛ржирзЗржЗ ржЯрж╛ржХрж╛ ржирзЯред");
}

function shareReferral() {
    const inviteLink = `https://t.me/skbd355_bot?start=${user.id}`; 
    tg.openTelegramLink(`https://t.me/share/url?url=${encodeURIComponent(inviteLink)}&text=Join and Earn!`);
}

function openReview() {
    tg.openLink("https://otieu.com/4/10370640");
    alert("ржЕрзНржпрж╛ржбржЯрж┐ ржжрзЗржЦрзЗ рж░рж┐ржнрж┐ржЙ рж╕ржорзНржкржирзНржи ржХрж░рзБржи ржПржмржВ рззрзж ржкржпрж╝рзЗржирзНржЯ ржмрзЛржирж╛рж╕ ржирж┐ржи!");
    setTimeout(() => {
        userRef.update({ balance: firebase.firestore.FieldValue.increment(10) });
    }, 5000);
}

// ржЖржкржирж╛рж░ ржУрзЯрж╛рж░рзНржирж┐ржВ рж╕рж┐рж╕рзНржЯрзЗржорж╕рж╣ ржирждрзБржи ржлрж╛ржВрж╢ржи
function awardCoins(amount, time, link, taskName) {
    if(confirm(taskName + ": ржмрж┐ржЬрзНржЮрж╛ржкржирзЗ " + time + " рж╕рзЗржХрзЗржирзНржб ржерж╛ржХрждрзЗ рж╣ржмрзЗред рж╢рзБрж░рзБ ржХрж░ржмрзЗржи?")) {
        const startTime = Date.now();
        tg.openLink(link);
        
        // ржЗржЙржЬрж╛рж░ ржлрж┐рж░рзЗ ржЖрж╕рж▓рзЗ ржУрзЯрж╛рж░рзНржирж┐ржВ ржЪрзЗржХ
        window.onfocus = function() {
            const now = Date.now();
            const diff = Math.floor((now - startTime) / 1000);
            if (diff < time) {
                alert("тЪая╕П рж╕рждрж░рзНржХрждрж╛: ржЖржкржирж┐ ржорж╛рждрзНрж░ " + diff + " рж╕рзЗржХрзЗржирзНржб ржЕрзНржпрж╛ржб ржжрзЗржЦрзЗржЫрзЗржиред ржкрзЯрзЗржирзНржЯ ржкрзЗрждрзЗ ржЖрж░ржУ " + (time - diff) + " рж╕рзЗржХрзЗржирзНржб ржЕржкрзЗржХрзНрж╖рж╛ ржХрж░рзБржи!");
            }
        };

        const checkInterval = setInterval(() => {
            const currentTime = Date.now();
            const timeDiff = Math.floor((currentTime - startTime) / 1000);

            if (timeDiff >= time) {
                clearInterval(checkInterval);
                window.onfocus = null; // ржУрзЯрж╛рж░рзНржирж┐ржВ ржмржирзНржз
                userRef.update({ balance: firebase.firestore.FieldValue.increment(amount) });
                alert("тЬЕ ржЕржнрж┐ржиржирзНржжржи! ржЖржкржирж┐ " + amount + " ржкржпрж╝рзЗржирзНржЯ ржкрзЗрзЯрзЗржЫрзЗржиред");
            }
        }, 1000);
    }
}

function toggleAdmin() {
    db.collection("withdraws").where("status", "==", "pending").get().then(snap => {
        let list = "ЁЯУв ржкрзЗржирзНржбрж┐ржВ ржкрзЗржорзЗржирзНржЯ рж▓рж┐рж╕рзНржЯ:\n\n";
        snap.forEach(doc => { 
            let d = doc.data();
            list += "ЁЯУ▒ " + (d.method || "N/A").toUpperCase() + ": " + (d.number || "N/A") + "\nЁЯТ░ Amt: " + d.amount + "\n\n"; 
        });
        alert(list || "ржмрж░рзНрждржорж╛ржирзЗ ржХрзЛржирзЛ ржкрзЗржирзНржбрж┐ржВ рж░рж┐ржХрзЛрзЯрзЗрж╕рзНржЯ ржирзЗржЗред");
    });
}

tg.MainButton.setText("ЁЯТ░ WITHDRAW MONEY").show().onClick(() => {
    userRef.get().then(doc => {
        if (doc.data().balance < 5000) return alert("тЪая╕П ржЕржирзНрждржд рзлрзжрзжрзж ржкрзЯрзЗржирзНржЯ ржкрзНрж░рзЯрзЛржЬржи!");
        let method = prompt("ржкрзЗржорзЗржирзНржЯ ржорж╛ржзрзНржпржо (bkash/nagad/rocket):");
        if (method) {
            let num = prompt(method.toUpperCase() + " ржирж╛ржорзНржмрж╛рж░ ржжрж┐ржи:");
            if (num && num.length >= 11) {
                db.collection("withdraws").add({
                    user_id: user.id, number: num, amount: 5000, method: method.toLowerCase(), status: "pending", timestamp: new Date()
                }).then(() => {
                    userRef.update({ balance: firebase.firestore.FieldValue.increment(-5000) });
                    alert("тЬЕ рж░рж┐ржХрзЛрзЯрзЗрж╕рзНржЯ рж╕ржлрж▓ рж╣рзЯрзЗржЫрзЗ!");
                });
            }
        }
    });
});
tg.expand();
                                </script>
    

</body>
</html>
